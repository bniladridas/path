# CodeQL Advanced Configuration
# This file contains advanced settings for CodeQL analysis

name: "Advanced CodeQL Configuration"

# Disable default queries to use only custom ones
disable-default-queries: false

# Custom query suites
queries:
  # Include security and quality queries
  - uses: security-and-quality
  - uses: security-experimental

# Custom query packs
query-filters:
  # Exclude low-severity issues for cleaner reports
  - exclude:
      problem.severity:
        - recommendation
        - warning

# Language-specific configurations
paths:
  - src
  - app.py
  - templates/
  - static/

paths-ignore:
  - node_modules/
  - .git/
  - __pycache__/
  - .pytest_cache/
  - .venv/
  - venv/
  - .env
  - "*.log"

# Python-specific configuration
python:
  setup:
    # Custom Python setup if needed
    python-version: "3.9"

# JavaScript-specific configuration
javascript:
  setup:
    # Custom Node.js setup if needed
    node-version: "18"

# Analysis settings
analysis:
  # Increase analysis timeout for complex codebases
  timeout: 600  # 10 minutes

  # Memory settings
  ram: 8192  # 8GB RAM

  # Thread count
  threads: 4

# Custom queries directory
# queries: ./.github/codeql-queries

# Database settings
database:
  # Compress database for storage efficiency
  compress: true

  # Database cleanup settings
  cleanup:
    # Remove intermediate files
    intermediate-files: true
    # Remove cache files
    cache: true

# Reporting configuration
reporting:
  # Generate detailed SARIF reports
  sarif:
    # Include source code snippets
    include-snippets: true
    # Include CWE information
    include-cwe: true
    # Include rule help
    include-rule-help: true

  # Custom severity levels
  severity:
    # Treat high-severity issues as errors
    error-on: high
    # Warn on medium-severity issues
    warn-on: medium

# Experimental features
experimental:
  # Enable experimental analyzers
  analyzers: true

  # Enable taint tracking improvements
  taint-tracking: true

  # Enable control flow analysis
  control-flow: true

# Telemetry settings
telemetry:
  # Enable telemetry for analysis metrics
  enable: true

  # Telemetry level
  level: detailed